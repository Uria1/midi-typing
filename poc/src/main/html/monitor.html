<html>
<style>
    body {
        font-size: 20pt;
        font-family: Courier New;
    }

    div.label {
        width: 200px;
        font-weight: bold;
        float: left;
        height: 40px;
    }

    div.value {
        height: 40px;
    }
</style>
<body>
<script language="JavaScript">
    function showData(id, data) {
        document.getElementById(id).innerHTML = data;
    }

    var socket = new WebSocket("ws://localhost:8002/events");

    socket.onopen = function (ev) {
        console.log('onopen');
        //socket.send("hi")
    }
    socket.onerror = function (ev) {
        console.log('onerror');
        console.log(ev)
    }
    socket.onmessage = function (ev) {
        console.log('onmessage');
        console.log(ev)
        var json = JSON.parse(ev.data);
        switch (json.eventType) {
            case "ModeChange":
                showData("mode", json.arg1);
                break;
            case "NoteStrike":
                showData("lastStrike", json.arg1);
                break;
            case "Command":
                showData("command", json.arg1);
                break;
        }
        return false;
    }
</script>
<div>
    <div class="label">Mode:</div>
    <div class="value" id="mode"></div>
    <div class="label">Last Strike:</div>
    <div class="value" id="lastStrike"></div>
    <div class="label">Last Command:</div>
    <div class="value" id="command"></div>
</div>
</body>
</html>
